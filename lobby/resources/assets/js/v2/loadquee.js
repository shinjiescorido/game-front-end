let to_load = [
	{
		"id" : "all_scoreboard",
		 "src" : "/img/all_scoreboard.png"
	},
	{
		"id" : "all_scoreboard_zh",
		 "src" : "/img/all_scoreboard_zh.png"
	},
	{
		"id" : "show_icon",
		"src" : "/img/show.png"
	},
	{
		"id" : "baccarat_banner_road",
		"src" : "/img/baccarat_banner_road.png"
	},
	{
		"id" : "cards",
		"src" : "/img/cards/regular-theme/lobby_sprite_cards.png"
	},
	{
		"id" : "cards2",
		"src" : "/img/cards/regular-theme/mobile_sprite_cards.png"
	},
	{
		"id" : "dealer_temp",
		"src" : "/img/dealer_temp.png"
	},
	{
		"id":"sample_1",
		"src": "/img/1.jpg"
	},
	{
		"id":"sample_2",
		"src": "/img/2.jpg"
	},

	{
		"id" : "modal_bg",
		"src" : "/img/confirmation/popup_bg.png"
	},
	{
		"id" : "modal_nihtan_logo",
		"src" : "/img/confirmation/nihtan-yellow_logo.png"
	},

	{
		"id" : "logo",
		"src" : "/img/nihtan_logo_mobile.png"
	},
	{
		"id" : "livegames_icon",
		"src" : "/img/livegames_ico.png"
	},
	{
		"id" : "reelgames_icon",
		"src" : "/img/reelgames_ico.png"
	},
	{
		"id" : "themedgames_icon",
		"src" : "/img/themedgames_ico.png"
	},
	{
		"id" : "baccarat_icon",
		"src" : "/img/baccarat_ico.png"
	},
	{
		"id" : "poker_icon",
		"src" : "/img/poker_ico.png"
	},
	{
		"id" : "sicbo_icon",
		"src" : "/img/sicbo_ico.png"
	},
	{
		"id" : "dragontiger_icon",
		"src" : "/img/dragontiger_ico.png"
	},
	{
		"id" : "roulette_icon",
		"src" : "/img/roulette_ico.png"
	},
	{
		"id" : "banner_img1",
		"src" : "/img/banner_img1.png"
	},
	{
		"id" : "bethistory_icon",
		"src" : "/img/bethistory_ico.png"
	},
	{
		"id" : "transactionhistory_icon",
		"src" : "/img/transactionhistory_ico.png"
	},
	{
		"id" : "gamerules_icon",
		"src" : "/img/gamerules_ico.png"
	},
	{
		"id" : "settings_icon",
		"src" : "/img/settings_ico.png"
	},
	{
		"id" : "hotgames_img2",
		"src" : "/img/hot-live_img1.png"
	},
	{
		"id" : "hotgames_img1",
		"src" : "/img/hot-live_img1.png"
	},
	{
		"id" : "logout_icon",
		"src" : "/img/logout_ico.png"
	},
	{
		"id" : "table-games-baccarat",
		"src" : "/img/m-table-games/baccarat_img.png"
	},
	{
		"id" : "table-games-dragonTiger",
		"src" : "/img/m-table-games/dragon-tiger_img.png"
	},
	{
		"id" : "table-games-poker",
		"src" : "/img/m-table-games/poker_img.png"
	},
	{
		"id" : "table-games-roulette",
		"src" : "/img/m-table-games/roulette_img.png"
	},
	{
		"id" : "table-games-sicbo",
		"src" : "/img/m-table-games/sicbo_img.png"
	},
  {
		"id" : "themed-games-spinwin",
		"src" : "/img/m-themed-games/money-wheel_img.png"
	},
	{
		"id" : "themed-games-pulaputi",
		"src" : "/img/m-themed-games/red-white_img.png"
	},
	{
		"id" : "themed-games_img1",
		"src" : "/img/themed-games_img1.png"
	},
	{
		"id" : "themed-games_img2",
		"src" : "/img/themed-games_img2.png"
	},
	{
		"id" : "road_map_poker",
		"src" : "/img/road_map.png"
	},
	{
		"id" : "sicbo_map_poker",
		"src" : "/img/sicbo_road_map.png"
	},
	{
		"id" : "road_map_dragontiger",
		"src" : "/img/dragon-tiger-roadmap.png"
	},
	{
		"_comment" : "/************* dice ************/",
		"id" : "dice-1",
		"src" : "/img/dice/dice1.png"
	},
	{
		"id" : "dice-2",
		"src" : "/img/dice/dice2.png"
	},
	{
		"id" : "dice-3",
		"src" : "/img/dice/dice3.png"
	},
	{
		"id" : "dice-4",
		"src" : "/img/dice/dice4.png"
	},
	{
		"id" : "dice-5",
		"src" : "/img/dice/dice5.png"
	},
	{
		"id" : "dice-6",
		"src" : "/img/dice/dice6.png"
	},
	{
		"id" : "mobile_bg",
		"src" : "/img/landing-page_bg.png"
	},
	{
		"id" : "small_tiles",
		"src": "/img/tiles/small_tiles.png"
	},
	{
		"id" : "big_tiles",
		"src": "/img/tiles/big_tiles.png"
	},
	{
		"comment" : "**----------------nihtan logo------------------**",
		"id" : "nihtan_logo",
		"src" : "/img/nihtan_logo_mobile.png"
	},
	{
		"comment" : "**----------------maintenance------------------**",
		"id" : "maintenance_nihtan",
		"src" : "/img/maintenance/logo.png"
	},
	{
		"id" : "maintenance_ico",
		"src" : "/img/maintenance/maintenance_ico.png"
	},
	{
		"id" : "maintenance_lpattern",
		"src" : "/img/maintenance/pattern_left.png"
	},
	{
		"id" : "maintenance_rpattern",
		"src" : "/img/maintenance/pattern_right.png"
	},
	{
		"id" : "all-games-baccarat",
		"src" : "/img/Lobby-MOBILE_v2.1-update/baccarat-mb.png"
	},
	{
		"id" : "all-games-poker",
		"src" : "/img/Lobby-MOBILE_v2.1-update/poker-mb.png"
	},
	{
		"id" : "all-games-sicbo",
		"src" : "/img/Lobby-MOBILE_v2.1-update/sicbo-mb.png"
	},
	{
		"id" : "all-games-dragonTiger",
		"src" : "/img/Lobby-MOBILE_v2.1-update/dragontiger-mb.png"
	},
	{
		"id" : "all-games-dragonTiger_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/dragontiger-mb.png"
	},
	{
		"id" : "all-games-redwhite",
		"src" : "/img/Lobby-MOBILE_v2.1-update/redwhite-mb.png"
	},
	{
		"id" : "all-games-redwhite_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/redwhite-mb.png"
	},
	{
		"id" : "all-games-redwhite_th",
		"src" : "/img/Lobby-MOBILE_v2.1-update/th/redwhite-mb.png"
	},
	{
		"id" : "all-games-roulette",
		"src" : "/img/Lobby-MOBILE_v2.1-update/roulette-mb.png"
	},
	{
		"id" : "all-games-roulette_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/roulette-mb.png"
	},
	{
		"id" : "all-games-roulette_th",
		"src" : "/img/Lobby-MOBILE_v2.1-update/th/roulette-mb.png"
	},
	{
		"id" : "all-games-paigow",
		"src" : "/img/Lobby-MOBILE_v2.1-update/paigow-mb.png"
	},
	{
		"id" : "all-games-paigow_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/paigow-mb.png"
	},
	{
		"id" : "all-games-paigow_th",
		"src" : "/img/Lobby-MOBILE_v2.1-update/th/paigow-mb.png"
	},
	{
		"id" : "all-games-spinwin",
		"src" : "/img/Lobby-MOBILE_v2.1-update/spinnwin-mb.png"
	},
	{
		"id" : "all-games-spinwin_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/spinnwin-mb.png"
	},
	{
		"id" : "all-games-kagaming",
		"src" : "/img/Lobby-MOBILE_v2.1-update/kagaming-mb.png"
	},
	{
		"id" : "all-games-kagaming_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/kagaming-mb.png"
	},
	{
		"id" : "all-games-kagaming_th",
		"src" : "/img/Lobby-MOBILE_v2.1-update/th/kagaming-mb.png"
	},
	{
		"id" : "all-games-betsoft",
		"src" : "/img/Lobby-MOBILE_v2.1-update/betsoft-mb.png"
	},
	{
		"id" : "all-games-betsoft_zh",
		"src" : "/img/Lobby-MOBILE_v2.1-update/zh/betsoft-mb.png"
	},
	{
		"id" :"ArvoBold",
		"src" : "/fonts/lobby/Arvo-Bold.ttf"
	},
	{
		"id" :"ArvoBoldItalic",
		"src" : "/fonts/lobby/Arvo-BoldItalic.ttf"
	},
	{
		"id" :"ArvoItalic",
		"src" : "/fonts/lobby/Arvo-Italic.ttf"
	},
	{
		"id" :"ArvoRegular",
		"src" : "/fonts/lobby/Arvo-Regular.ttf"
	},
	{
		"id" :"LatoRegular",
		"src" : "/fonts/lobby/Lato-Regular.ttf"
	},
	{
		"id" :"LatoBold",
		"src" : "/fonts/lobby/Lato-Bold.ttf"
	},
	{
		"comment" : "**----------------announcement/notice------------------**",
		"id" : "notice_ico",
		"src" : "/img/icons/notice_icon.png"
	},
	{
		"comment" : "***baccarat icons ***",
		"id" : "supersix_norm",
		"src" : "/img/icons/baccarat/supersix/super6_table_list.png"
	},
	{
		"comment" : "***baccarat icons ***",
		"id" : "dragonbonus_norm",
		"src" : "/img/icons/baccarat/bonus/bonus_table_list.png"
	},
	{
		"comment" : "***baccarat icons ***",
		"id" : "supersix_vip",
		"src" : "/img/icons/baccarat/supersix/super6_tablevip_list.png"
	},
	{
		"comment" : "***baccarat icons ***",
		"id" : "dragonbonus_vip",
		"src" : "/img/icons/baccarat/bonus/bonus_tablevip_list.png"
	},
	{
		"id" : "void",
		"src" : "/img/icons/void/void_mob.png"
	}
]

let snd = [
	{
		"id" : "click",
		"src" : "/sound/click.mp3"
	},
	{
    id: "welcome",
    src: "/sound/" + window.language.locale + "/mode-1/welcome-nihtan.mp3"
  }
]

import { createSprite, randomNum, createCardSprite, numberCounter, playSound, numberWithCommas, createSpriteRoadMap, setCurrentTimezone } from '../factories/factories';

let loadproc = {
	queue : new createjs.LoadQueue(true),
	main () {

		$(".wrapper").show();
		$(".card--wrapper>.card").show();

		if(window.nonInstall) {
			// $(".container").css({"overflow" : "initial"});
		}

		snd.forEach((e) => {
			createjs.Sound.registerSound(e);
		});

		function getOS() {
			var userAgent        = window.navigator.userAgent,
			platform         = window.navigator.platform,
			macosPlatforms   = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],
			windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'],
			iosPlatforms     = ['iPhone', 'iPad', 'iPod'],
			os               = null;

			if (macosPlatforms.indexOf(platform) !== -1) {
				os = 'MacOS';
			} else if (iosPlatforms.indexOf(platform) !== -1) {
				os = 'iOS';
			} else if (windowsPlatforms.indexOf(platform) !== -1) {
				os = 'Windows';
			} else if (/Android/.test(userAgent)) {
				os = 'Android';
			} else if (!os && /Linux/.test(platform)) {
				os = 'Linux';
			}
			return os;
		}

		this.queue.on("complete", () => {
			this.context.main();
			this.context.finishedLoad = true;
			$(".wrapper").hide();


			if(window.nonInstall) {
				$(".container").css({"overflow" : ""});
				if (getOS() == "Android") {
			   $('#popup-gofullscreen').show();
			   $('.popup-mb-container, #popup-gofullscreen').show();
			  }
			}

			config.effect = 1;
		});

		this.queue.on("progress", this.handleProg);
		this.queue.loadManifest(to_load);
	},
	handleProg (e) {
		$(".card--percent").html(parseInt(e.progress*100)+'%')
	},
	getResources (key)  {
		return this.queue.getResult(key);

		let ret = _.filter(to_load , (e) => {
			if(e.id == key) return e.src
		});

		return ret[0].src;
	}
}

export default {
	loadproc
};
